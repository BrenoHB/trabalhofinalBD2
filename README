ðŸš€ Tecnologias Utilizadas
Tecnologia	FunÃ§Ã£o
FastAPI	API principal que integra todos os bancos
PostgreSQL	Dados principais de clientes, produtos e compras
MongoDB	Interesses, tags e comportamentos
Neo4j	Rede social de clientes (amizades e indicaÃ§Ãµes)
Redis	Cache das recomendaÃ§Ãµes
Docker Compose	OrquestraÃ§Ã£o dos serviÃ§os

ESTRUTURA:
.
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md


â–¶ï¸ Como Executar o Projeto
1. Instale o Docker Desktop

https://www.docker.com/products/docker-desktop/

2. Clone este repositÃ³rio
git clone https://github.com/BrenoHB/trabalhofinalBD2
cd trabalho-integracao

3. Suba todos os serviÃ§os
docker compose up -d --build

4. Acesse a API

ðŸ“Œ Docs interativas (Swagger UI):

ðŸ‘‰ http://localhost:8000/docs

ðŸ“Œ Health check da integraÃ§Ã£o:

ðŸ‘‰ http://localhost:8000/health

ðŸ—ƒï¸ Exemplos de InserÃ§Ã£o de Dados

A API depende de dados nos bancos. Aqui estÃ£o exemplos para popular cada base.

ðŸ˜ PostgreSQL â€” Clientes, Produtos e Compras

Acesse o container:

docker exec -it db_postgres psql -U admin -d recomendador

InserÃ§Ã£o de dados:
INSERT INTO clientes (cpf, nome, endereco, cidade, uf, email) VALUES
('111.111.111-11', 'JoÃ£o Silva', 'Rua A, 100', 'ChapecÃ³', 'SC', 'joao@example.com'),
('222.222.222-22', 'Maria Souza', 'Rua B, 200', 'ChapecÃ³', 'SC', 'maria@example.com'),
('333.333.333-33', 'Carlos Lima', 'Rua C, 300', 'FlorianÃ³polis', 'SC', 'carlos@example.com');

INSERT INTO produtos (produto, valor, quantidade, tipo) VALUES
('Notebook Gamer', 5500.00, 10, 'EletrÃ´nicos'),
('Mouse Sem Fio', 120.00, 50, 'PerifÃ©ricos'),
('Teclado MecÃ¢nico', 320.00, 30, 'PerifÃ©ricos');

INSERT INTO compras (id_produto, data, id_cliente) VALUES
(1, '2025-11-01', 1),
(2, '2025-11-02', 1),
(3, '2025-11-03', 2),
(2, '2025-11-05', 3);

ðŸƒ MongoDB â€” Interesses do Cliente
docker exec -it db_mongo mongosh

use recomendador_docs;

db.clientes_interesses.insertMany([
  {
    cliente_id: 1,
    interesses: ["notebook", "gamer", "perifÃ©ricos"],
    tags_comportamento: ["visita_frequente"]
  },
  {
    cliente_id: 2,
    interesses: ["teclado mecÃ¢nico"],
    tags_comportamento: ["cliente_novo"]
  },
  {
    cliente_id: 3,
    interesses: ["mouse sem fio"],
    tags_comportamento: ["abandono_carrinho"]
  }
]);

ðŸ•¸ï¸ Neo4j â€” Grafo de Relacionamentos

Acesse o painel:

ðŸ‘‰ http://localhost:7474

UsuÃ¡rio: neo4j 
Senha: senha123

Rode:

MATCH (n) DETACH DELETE n;

CREATE (c1:Cliente {id_cliente: 1, nome: 'JoÃ£o Silva'});
CREATE (c2:Cliente {id_cliente: 2, nome: 'Maria Souza'});
CREATE (c3:Cliente {id_cliente: 3, nome: 'Carlos Lima'});

CREATE (c1)-[:AMIGO_DE]->(c2);
CREATE (c2)-[:AMIGO_DE]->(c3);

CREATE (c1)-[:INDICOU {produto: "Notebook Gamer"}]->(c3);

âš¡ Redis â€” Teste de Cache
docker exec -it db_redis redis-cli

SET teste "oi redis"
GET teste

ðŸ”¥ Testando a API
âœ” Listar clientes
GET http://localhost:8000/clientes

âœ” Detalhar cliente
GET http://localhost:8000/clientes/1

âœ” RecomendaÃ§Ãµes integradas (Postgres + Mongo + Neo4j + Redis)
GET http://localhost:8000/recomendacoes/1


Primeira resposta:

{
  "origem": "bancos",
  "cliente": {...},
  "compras": [...],
  "interesses": [...],
  "amigos": [...],
  "indicacoes": [...]
}


Segunda resposta (cache):

{
  "origem": "cache_redis",
  ...
}
